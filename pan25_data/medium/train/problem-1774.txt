So that explains why,as for how, well regardless of their geopolitical situation and ass-backwards government, they are still a large country, with a large and highly educated citizenry to pull from from to develop such capabilities.
To put it into perspective, their population is 86 million, more than half of Russia, about twice that of Ukraine, and more than either France or the UK.
Combine that with a territory larger than either France or the UK, some of the world's largest petrochemical reserves, plus plenty of available field-testing via the (mis)adventures of its proxies, and you have many of the makings of a military competent regional power with an indigenous defense industry to match.
Yeah I'm confused too; when did Iran, under so many sanctions and never being a global power, ever managed to have weapons tech that surpassed Russia's?
It only surprises you because you (And pretty much the entire western world) missed Israel's countless warnings about Iran in the last decade.
Much worse will come if Iran has weapons of mass destruction and is no longer afraid from foreign interventions.
They must be stopped.