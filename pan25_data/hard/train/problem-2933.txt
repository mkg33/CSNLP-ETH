This is hearsay, but the way I understand it Afghanistan is still very tribal.
Unless you lived in a big city like Kabul you didn't really consider yourself a citizen of the country of Afghanistan.
You considered yourself a member of this tribe or this village.
That's why the army folded to the Taliban like so many dominoes.
They didn't consider themselves as soldiers fighting for their country, it was just some job to send money home to your tribe or village.
Personally I don't think that there is necessarily anything wrong with that in a vacuum, but it does explain why "nation building" efforts never succeeded and why the Taliban could easily take root again and again.
Conveniently forgetting that the reason why the taliban exists and has power is because they are wildly supported by the people, especially the Pashtuns.
And before anyone spreads the next lie, the US supported the Mujahideen who were the enemies of the Taliban against and of the USSR.
The Taliban are a product of Pakistan which was created by the UK giving Islamists their own country.
Every other country in the region besides Israel is just like Iran.
Stop blaming the US for Islamists.