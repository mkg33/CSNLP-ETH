vietnam has CENTURIES of interactions with China, went through many phases, but each time China tried to funny, they have been resolutely repelled.
While about a thousand years ago China did directly rule parts of Northern Vietnam as part of their control over this region, they eventually learned that direct control wasn't the best way to go about 'pacifying' the region.
Over time, the tusi system was adopted instead.
Under this system, certain tribes and 'tribal nobles' could hold certain aristocratic titles to their local regions and receive the backing of the Chinese state to maintain control.
This was very attractive to many local tribal leaders, as they could use Chinese armies to crush their local rivals.
While they would nominally have to be a part of China as a whole, they possessed an enormous amount of autonomy and could inherit their titles, something which didn't exist in China proper (officials might hold the same titles their parents held, but there was no guaranteed inheritance).
Additionally, Chinese influence in this region was so weak that many tusi chieftains would often swear allegiance to multiple states at once, leading to border conflicts between other powers.
Historically Chinese empires viewed their frontiers as areas of vital national importance.
Many dynasties had been toppled or weakened by invasions/conflicts with 'barbarians' on their Western, Southern, and Northern borders.
The Southern border, where Vietnam is, had been particularly difficult to rule due to the complicated geography of the region.
The point of all this is that China's historic meddling and expansion in the region wasn't as simple as merely trying to "invade and take Vietnam" for nationalist purposes, something which did happen but was eventually abandoned as a long-term project.
It had more to do with the region being a source of both instability for all states bordering it and vital resources.