If I understand correctly, I need to add Shibboleth as a relying party trust to ADFS.
Everything below adfs/services returns an HTTP 503 error.
None of the solutions recommended elsewhere seem to fix that (restarting IIS, fiddling with certificates).
Probably, I'm just not grasping the concept correctly...
I would like to address the first one: generate the shibboleth SP metadata.
If you plan to let the SP download it from IdP, you need to check the ADFS documentation.
You can use the tool: shib_metagen (in Debian it is in the shibboleth-sp2-utilspackage).
For that reason I set up a Ubuntu VM with Apache and Shibboleth and a Windows Server VM with ADFS.
I also can't find any logfile which protocols the 503 error.
The SSO tag in shibboleth2.xml has nothing to do with metadata: it contains the entityID of the IdP.
However, this doesn't work as Shibboleth tries to get Metadata from ADFS as specified in the shibboleth2.xml <SSO> tag (https://winserver.testdomain.com/adfs/services/trust).
In the shibboleth2.xml you specify where the federation metadata are.
What I'd like to achieve is having an Apache server authenticate against ADFS as IdP using Shibboleth as SP.
Did you follow this guide: AD FS 2.0 Step-by-Step Guide: Federation with Shibboleth 2 and the InCommon Federation?
I'm trying to familiarize myself with Shibboleth 2.5.3 and Active Directory Federation Services (tried both 2.0 and 3.0).
But you can also include the xml metadata of the IdP (the ADFS server), as a file.
The metadata things are in the MetadataProvider element.
In order to do that, I need metadata generated by Shibboleth at https://shibboleth/Shibboleth.sso/Metadata.