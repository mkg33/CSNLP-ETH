Unfortunately I have some problems with the ExecStop command because it is executed after the actual stop of the service.
I figured out that there is another ExecStop defined in /run/systemd/generator.late/apache2.service (a file automatically generated by systemd-sysv-generator).
I thought about shipping this drop-in file in the systemd apache configuration (/etc/systemd/system/apache2.service.d/ folder):
Reading here the drop-ins in /etc/ should be the ones with the highest priority, so i don't get why my drop-in ExecStop action is executed last.
I have several debian 8 servers shipped with a default configuration.
I found a workaround redefining all the ExecStop sequence in my drop-in file:
They have on board apache2 and i want to add monit ( https://mmonit.com/monit/ ) for extra availability.
but i think it's not a very "clean" solution in my opinion.
Of course there is no problem in having multiple ExecStop commands, the problem here is about order:
To manage operator-driven stops and starts of apache, i would love to add monit monitor and unmonitor actions to the apache systemd unit.