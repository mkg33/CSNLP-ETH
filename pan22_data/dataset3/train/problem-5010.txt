See http://www.mailstore.com/en/mailstore-home.aspx
When you click Next, you are given the option of choosing your file type and delivery method.
(At various occassions I've tested Thunderbird, Evolution, mutt, Windows [Live] Mail, Outlook, Eudora, and Outlook Express.)
The defaults are probably appropriate, so just click Create archive.
: if you don't know how to use the software, http://www.howtoforge.com/how-to-migrate-mailboxes-between-imap-servers-with-imapcopy
Thunderbird and Evolution has very good IMAP support.
You may want to take a look at MailStore Home (completely free for personal usage).
Go to https://www.google.com/settings/takeout/custom/gmail,calendar.
(By the way, the custom POP3 server used by Gmail does, in fact, include sent messages, although it has other limits.)
Long after I posted this question, google added a feature to make it much easier to download all of your email from gmail.
imapcopy for linux will enable you to backup the data in another IMAP account.
Practically any desktop IMAP client will allow you to mark all messages and drag them into a local folder, or into your IMAP mailbox.
Via IMAP you can see all messages, both sent and received.
You can backup emails from nearly every account in one single application.
Use IMAP4, it will allow browsing messages directly on the server, as well as copying them out.
Note that this link, by default, allows you to download your calendar and your mail, but you can download data from other products by clicking on Show more products.
you can label all the email from another account using filters.
Once google has archived your data, they will send a download link to you.
The best method would probably be to set up Gmail to allow IMAP access, then download everything with an IMAP client.
This blog post describes the process, which I will summarise.
Batch downloads can be done using getmail or OfflineIMAP, on Linux or OS X.