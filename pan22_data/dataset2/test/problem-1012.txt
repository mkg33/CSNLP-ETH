The difficulty comes from the fact that puppet's language is not imperative, it's declarative so when you change your variable setting you don't have the previous value. Puppet just checks if the machine is in the state you want and if not makes sure it becomes as you asked or errors out.
in the beginning, and happily work with this for some months. Then I want to change the docroot to /home/www/vhost. Puppet then changes the apache vhost, but I also have some data in the old /var/www/vhost folder which is not managed by Puppet. Is it possible put some migration steps in between, for example:
IMHO the correct way to do this kind of changes is to provision the new site like you did with the old one assuming you did it with puppet, and check for the existence of the old document root, if you find it you delete it.
If I have a configuration in Puppet which changes between two runs, it is possible to implement some migration tasks for this?
"If the docroot changes from /var/www/vhost to /home/www/vhost then: mv /var/www/vhost /home/www/vhost".