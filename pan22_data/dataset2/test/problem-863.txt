Does anyone know a tool that I can use to snapshot state of the file system and registry? Like all the keys, and files on the file system. Then after I install software I'd like to diff the new registry and the old (and also the file system) to get more ideas about what could be going wrong.
https://www.raymond.cc/blog/tracking-registry-and-files-changes-when-installing-software-in-windows/
I'm solving a problem - I'm installing software on Windows and it makes the system unstable for some reason. Windows starts crashing soon after. I want to know what changes it made to the registry and also to the file system.
You could run Sysinternals Process Monitor which allows monitoring file system, registry and process/thread activity in real-time. You can also set filters that allows you to monitor just the installer, which helps to rule out changes made by other processes.
Look into something like one of the snapshot based package creators. Emisoft makes some. Cameyo is a app visualization platform, but will get the same info for free.