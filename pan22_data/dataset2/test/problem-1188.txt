I have an issue. I have situation where I need to send around 3000 emails per request using SMTP. However, only 30-40 reaches destination.
I created a mailer for my last job that sends a bit over 3,000 emails every Monday morning (in batches of 50 with a delay between batches depending on the size of the message). 3,000 is not a particularly large amount and there's no reason your system shouldn't be able to handle it with ease.
We use them and you just config postfix to act as a relay and all your mail will get relayed to them.
I suspect that your real issue is one of spam. Specifically, unless your system has been appropriately configured and the messages properly constructed and written they will be trapped as spam by most receiving systems. Get those details sorted out and you should be fine. As for the specifics, that's another question altogether and a topic which has been very well covered many times before and doesn't need to be repeated.
This should run from cron and not from HTTP request, because it will timeout so this way not all mails will be delivered, which you have described.
You should send the mails in batches. The batch size has to be tested but I'd start with 10 to 50 with short delays.
Do you have any idea what can be a problem and how to solve it. as server side script I am using PHP.