modprobe and iptables work in the main server so I could install it there and link to the logfiles somehow, my guess?
I believe you'll have to run fail2ban on the container host machine (not in the container itself).  Now if you have a service running in one of the containers, what you do is configure fail2ban to look for the log file within the filesystem of the container, since the host can see the container's filesystem.  For example, I have a container named mediabox.  This is an LXD managed container, and I have used the snap package to install LXD.  So I would point fail2ban to the log file using a path like /var/snap/lxd/common/lxd/containers/mediabox/rootfs/var/log/...  If you didn't use the snap package, then your paths might vary a bit.  You get the idea how this works?  Fail2ban watches log files.  So you can have it run on the host, watch a container's log file, and do the "banning" using iptables on the host (since you can't do it in the container anyway).  I hope this helps.
I am guessing that it can't work because the LXC containers share one kernel, the main server kernel.