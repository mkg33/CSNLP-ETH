Then, assuming that plays in sync you should try doing a straight codec copy and remux the source into a different format, i.e.:
Try to make each test conversion as simple as possible, i.e. don't change bitrate/sample rate, use the example parameters I listed first. After each one you'll be one step closer to knowing exactly what you can and can't do. If you have to have h.264 I'd recommend going with an mp4 container as it's far more compatible than avi, on the other hand if the requirement is an avi container then I'd recommend wmv3 or msvideo1 for video as they would be the most likely to encode properly.
Almost always, when audio and video are out of sync and difference between the two get progressively worse over the course of the movie, especially after a conversion, the issue is one where the audio and video components were of a different length.  As was observed in this instance, this happened because video frames were getting dropped, but the audio was relatively untouched during the conversion.
MKV will usually handle just about anything you stuff in it without a problem. I even hide some encrypted zip files in various mkv videos on my computer since you can encode file attachments in MKVs. So if either of that works without sync issues then try the same thing but re-encode the video or audio, but only one or the other to start and keep the container format consisten so you know where the issue lies. i.e.:
At times like this, it is best to first check the source movie to ensure that the audio was indeed in sync.  If it is, then demux the movie, and deal with the video and audio components separately.
It may have dropped frames if they were duplicates, if the source plays fine then your problem is more likely related to the fact that AVI containers don't handle VBR encoded formats very well (h264 in particular doesn't play well with AVI).  I'd recommend starting by dumping the video to an uncompressed AVI for testing as it's the most consistent format to encode from