Github user iccir has made a very handy little menubar app called Fermata that does exactly what you want: keeps a MacBook awake with the lid closed,Â and allows you to set a timeout duration.
I'm looking for a solution that both allows the user to close the lid and specify a timeout duration. I don't want to leave the laptop running all night; usually just 30 minutes to an hour.
The Amphetamine app can do this now.  It includes all kinds of triggers, including for apps running or specified time amounts, so it should cover the original use case just fine.
Occasionally it's useful to leave a MacBook running for an hour or so to complete updates or some lengthy data analysis at the end of the day. I'd like to be able to close the lid of the MacBook or turn off the screen to prevent unnecessary light pollution.
If this behavior is not occurring, the only official way to be able to close the lid without sleeping is to connect an external mouse, keyboard and monitor.
NoSleep was, supposedly, designed to work with the default OSX sleep settings (found here. NoSleep is only supposed to prevent the sleep from occurring when closing the lid (at least, this is how it was designed).