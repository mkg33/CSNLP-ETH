I have a pretty beefy machine at my disposal running Ubuntu 16.04 Server. It's running several docker containers and virtual machines (using VirtualBox) referred to as VMs hereafter. At the moment the host has assigned one IP address (say, 192.168.1.10) and the services on the VMs are accessed by NATing (e.g. 192.168.1.10:80 -> 172.17.0.2:80), which is unsatisfactory.
Almost all tutorials on iptables deal with forwarding one port or a range of ports but there are only few that deal with all the traffic on an interface.
Can anyone spot my mistake? Or does anyone have good advice for alternative tools that get the job done?
172.17.0.2 is the private IP of one of the VMs. It's running a webserver at port 8000. telnet 172.17.0.2 8000 establishes a connections, which tells me that the webserver is running. But telnet 192.168.1.100 8000 doesn't work.
Instead, I'd like to bind multiple IP addresses (say, 192.168.1.100-110) to the hosts interface and forward the traffic hitting the additional IP addresses into the VMs. Which results in a mapping <public IP> <--> <private IP>.
But the second part causes me headaches. So far I've only considered iptables based solutions, as it seems most appropriate and all guides I've read so far used it also.
entries into my /etc/network/interfaces file (where ens3 obviously is the name of the host network interface). That means the additional IP addresses are up an running.