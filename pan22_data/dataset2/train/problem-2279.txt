I should probably mention that MySQL is using a Docker volume which the host has direct file access to to store its data.
I have tried many different configurations to fix this problem, and additionally, I sometimes will get a MySQL server has gone away error.
When I try to import some of the files, I can see memory usage spike to 32 GB (100%), and after allocating 100 GB of swap memory, the highest I've seen it go to is 60 GB (60 GB + 32 GB = 92 GB!!!)
I have about 300 1-2GB SQL files which need importing into a database on the server, into a single table.
What can I do? I have considered chunking the INSERT statement into multiple different INSERTs, but this would require some extensive code refactoring due to the multiprocessing flow of my program which generates the SQL files.
Bearing in mind that MySQL is trying to use 92 GB of RAM to import a 1 GB SQL file into a single table on an empty database, what could it possibly be doing? It does not seem to be a memory leak, because once the file is finished importing, the memory becomes unallocated.