Is it possible to avoid the pop3 collector and send incoming email directly from the postfix to the exchange server? I know that I can do that with transport maps in postfix but my problem is that the exchange server has a dynmaic ip.
For example keep the mails in the users mailbox on postfix until postfix can connect to the exchange server and relay the mails.
This question isn't really about Exchange or the fact that it uses a dynamic ip address. The question really is "Can I have my Postfix server queue emails in the event that Exchange is unavailable?". You've already stated that you know you can.
So if the server isnt available I want to have the emails on the postifx server so that it is possible to read the mails on the postfix server if they wasnt relayed to the exchange server. And when the exchange is back online I want that the mails are relayed again.
For outgoing emails on the exchange server I have setup a connector to sending it to the postfix server which is working fine.
If you're using dynamic DNS for the Exchange server and it's ip address changes then that change should be reflected in your name servers automatically via the dynamic DNS service. Postfix should be configured to send email to the FQDN of the Exchange server as configured in your dynamic DNS. If the dynamic ip address changes then at most Postfix will queue the email until the dynamic DNS record is updated and the TTL of the dynamic DNS record expires in it's local cache. Once the dynamic DNS record is updated and the TTL expires Postfix will query anew for the record and happily resolve it to the new ip address.
For incoming emails I have setup a external tool to fetch the emails with POP3 from the postfix server and forward it to the exchange server.
I have a local Exchange Server which has a dynamic internet ip. So I have setup a dynamicdns server for this server. The server is my main mail server.
I dont want to change the MX Records because the Exchange server has a dynamic IP. So I want to have the postfix server as a relay server.