So, there still doesn't appear to be a direct way to use an ERB template to on a collected set of resources, but one can collect a types. That can include Augeas types to stuff everything into one file, or a hack of collecting files into a configuration. It doesn't yet include what I was looking for on the question, though.
The server's configuration file needs a repeated entry for each client host. If I were to create a simple array, this would work without issue. What I want to do, however, is have each host register itself and then collect the data using the <<| |>> pragma similar to what one would do with the nagios_* types.
Well, first I gave up and set my @@ on the actual file type. The upside is that this is still using the variables on the client host.
However, I can't quite figure out how to write a type or reference it in a way that would allow me to read that array of values from the .erb template. Is there a way I can use exported resources in combination with a variable loop in a .erb file?
Finally, the Bacula director software itself allows me to do the following at the end of my bacula-dir.conf file:
Purge and recurse cleans out anything not defined. When I take a host offline, puppetstoredconfigclean $hostname will clean the facts and the next run of puppet on the director will reset the configuration approrpiately.