You need to write a script in any language you know/prefer to count the number of files in your directory. In this script, you can return specific exit status based on whether you want to consider the current state as OK, WARNING, or CRITICAL in nagios terms.
You can use the nrpe daemon (on the nagios server) to initiate a command on the remote host. In your Nagios services.cfg you might add a stanza which looks like this (change the admins contact group to a real contact group on your system.. or leave commented out?):
Then, on my.windows.host you would have to find the nrpe.cfg file and add a line something like this (note: this is from a linux client but the configuration for windows is very similar)
It is these exit coes which trigger the alert state in nagios to signal to the server somehting is amiss. It is in this batch file where you could do something like:
The file check_david_files would need to be some kind of executable (batch file works apparently) which prints either "OK', "WARNING", "CRITICAL" or "UNKNOWN" and then exits with the corresponding exit code: