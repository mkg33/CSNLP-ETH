We have a C# ASP.NET MVC website that is hosted on Azure (app service) that connects to a 3rd party REST API. This always ran without problems, but some time ago the 3rd party replaced their old loadbalancer with a brand new Citrix NetScaler. Since then, our website will usually run fine for an hour or so (depending on traffic) but then, we will start to receive errors:
These errors usually increase over time. It starts with maybe 1 an hour, but after 24 hours, we will receive around 100 in half an hour.
If we then switch back to the old loadbalancer endpoint, the errors disappear, when we switch back to the new loadbalancer endpoint, the issue repeats itself.
We also have a Java 7 website hosted on Google App Engine which connects to the same new loadbalancer, but doesn't have this problem.
The 3rd party is in contact with Citrix support, but so far, nothing has been found on their side (I do not have any details).
I know this problem is extremely vague, for which I apologize. I'm hoping that someone might have a clue as to why we see this in our .NET website on Azure, but not on our Google App Engine Java website. Moreover, I have tried searching the web for this issue, but have found absolutely nothing. Which seems a bit strange, as I'm quite sure that many people have a similar setup but apparently have no issues.
So the question I want to ask is: does anyone have any idea why this might be happening? Anyone who knows Citrix NetScaler, or has seen a similar issue before? I can provide more information when needed.
To narrow down your issue I suggest to compare two different Network Packet trace from your Netscaler (working scenario VS none working scenario) + investigate the ns.log located :
Also this is the public article to capture a trace on your Netscaler :