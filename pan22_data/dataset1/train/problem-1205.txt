The 32bit is the culprit. Due to a strange rounding up when calculating buffers, the server would allocate almost twice as much memory (3GB instead of 1.5GB), leaving only 1GB address space for anything else .It is fixed in 10.2.7 and later, the bug report is here https://jira.mariadb.org/browse/MDEV-12097
I have two servers, one with Windows Small Business Server 2008 and the other runs Windows Server 2012 R2. The servers have running multi master replication. Both uses MariaDB 10.2.6. On the old 2008 everything works fine, even that the database is 32-bits. But on the 2012 I get frequently "Out of memory", the database uses only ~450MB and the system have 6GB free memory when the error shows up. Here is my complete my.ini, I tried already everything:
I am running out of ideas why this happens.. I have tested if the system have some limitations but a small python program allocates over 2GB of RAM with no problems. Both servers are running the same config - on the 2008 the memory usage goes up to 1.5GB with no problems.