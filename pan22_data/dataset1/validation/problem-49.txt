I have a management pack that discovers and monitors certain objects. Everything is working as expected in the configuration where the direct communication between the agent and the management server is possible. 
The problem is when I'm using a SCOM Gateway configuration. Most of the functionalities remain unaffected, except for one discovery. This discovery creates the largest discovery data by far. This discovery discovers multiple instances of a single class at once, and for a small number of these instances the discovery works. When the number of objects reaches a certain number the discovery stops working. By using debug mode I can identify that the discovery is being triggered but the data doesnt seem to be written into the OM database. 
Is there some kind of limitation to the size of single discovery data object that is specific to SCOM Gateway? I would like to mention that the discovery for same number of objects is working when using standard Management Server, it only fails when we are using SCOM Gateway? I have managed to identify that the discovery certainly fails when the size of discovery data reaches ~20MB. Is there some kind of limitation that was placed for security reasons and can this limitation be overridden trough changing of some of the registry values related to SCOM?
Any help or further hints would be greatly appreciated. 
From my reading the Gateway server is a glorified Agent. So if you were to look into any limitations check out what specific limitations there may be for SCOM Agents which are acting as proxies perhaps?